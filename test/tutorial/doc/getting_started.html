

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started with Sphinx-Gallery &mdash; Lipai&#39;s Notebook July 2020 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Lipai's Notebook
          

          
            
            <img src="../../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Jul 2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../me.html"><strong>Pai Li (李湃)</strong></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/periodic_table.html"><strong>Periodic Table</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/unit_convert.html"><strong>Unit Conversion</strong></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/vasp.html">Vasp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/super.html">Scripts for job management system on super-computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/kmc.html">kMC simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/ml.html">Machine Learning tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/python.html">Python Scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/latex.html">Math notation in Latex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/vim.html">Vim skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/Restructured_Text.html">A ReStructuredText Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/pdf_documents.html"><strong>PDF documents</strong></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/index.html">Gallery of python scripts</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Lipai's Notebook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started with Sphinx-Gallery</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/test/tutorial/doc/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started-with-sphinx-gallery">
<h1>Getting Started with Sphinx-Gallery<a class="headerlink" href="#getting-started-with-sphinx-gallery" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.org/sphinx-gallery/sphinx-gallery"><img alt="https://travis-ci.org/sphinx-gallery/sphinx-gallery.svg?branch=master" src="https://travis-ci.org/sphinx-gallery/sphinx-gallery.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://sphinx-gallery.readthedocs.io/en/latest/?badge=latest"><img alt="Documentation Status" src="https://readthedocs.org/projects/sphinx-gallery/badge/?version=latest" /></a>
<a class="reference external image-reference" href="https://ci.appveyor.com/project/Titan-C/sphinx-gallery/history"><img alt="https://ci.appveyor.com/api/projects/status/github/sphinx-gallery/sphinx-gallery?branch=master&amp;svg=true" src="https://ci.appveyor.com/api/projects/status/github/sphinx-gallery/sphinx-gallery?branch=master&amp;svg=true" /></a>
<p>A Sphinx extension that builds an HTML version of any Python
script and puts it into an examples gallery.</p>
<p>It is extracted from the scikit-learn project and aims to be an
independent general purpose extension.</p>
<div class="section" id="who-uses-sphinx-gallery">
<h2>Who uses Sphinx-Gallery<a class="headerlink" href="#who-uses-sphinx-gallery" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://sphinx-gallery.readthedocs.io/en/latest/auto_examples/index.html">Sphinx-Gallery</a></p></li>
<li><p><a class="reference external" href="http://scikit-learn.org/dev/auto_examples/index.html">Scikit-learn</a></p></li>
<li><p><a class="reference external" href="https://nilearn.github.io/auto_examples/index.html">Nilearn</a></p></li>
<li><p><a class="reference external" href="https://www.martinos.org/mne/stable/auto_examples/index.html">MNE-python</a></p></li>
<li><p><a class="reference external" href="https://pystruct.github.io/auto_examples/index.html">PyStruct</a></p></li>
<li><p><a class="reference external" href="http://www.pygimli.org/_examples_auto/index.html">GIMLi</a></p></li>
<li><p><a class="reference external" href="https://kbarbary.github.io/nestle/examples/index.html">Nestle</a></p></li>
<li><p><a class="reference external" href="https://pythonhosted.org/pyriemann/auto_examples/index.html">pyRiemann</a></p></li>
<li><p><a class="reference external" href="http://scikit-image.org/docs/dev/auto_examples/">scikit-image</a></p></li>
<li><p><a class="reference external" href="http://docs.astropy.org/en/stable/generated/examples/index.html">Astropy</a></p></li>
<li><p><a class="reference external" href="http://docs.sunpy.org/en/stable/generated/gallery/index.html">SunPy</a></p></li>
<li><p><a class="reference external" href="https://pysurfer.github.io/">PySurfer</a></p></li>
<li><p><a class="reference external" href="https://matplotlib.org/index.html">Matplotlib</a> <a class="reference external" href="https://matplotlib.org/gallery/index.html">Examples</a> and <a class="reference external" href="https://matplotlib.org/tutorials/index.html">Tutorials</a></p></li>
</ul>
</div>
<div class="section" id="getting-the-package">
<h2>Getting the package<a class="headerlink" href="#getting-the-package" title="Permalink to this headline">¶</a></h2>
<p>You can do a direct install via pip by using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install sphinx-gallery
</pre></div>
</div>
<p>Sphinx-Gallery will not manage its dependencies when installing, thus
you are required to install them manually. Our minimal dependencies
are:</p>
<ul class="simple">
<li><p>Sphinx</p></li>
<li><p>Matplotlib</p></li>
<li><p>Pillow</p></li>
</ul>
<p>Sphinx-Gallery has also support for packages like:</p>
<ul class="simple">
<li><p>Seaborn</p></li>
<li><p>Mayavi</p></li>
</ul>
<div class="section" id="install-as-developer">
<h3>Install as developer<a class="headerlink" href="#install-as-developer" title="Permalink to this headline">¶</a></h3>
<p>You can get the latest development source from our <a class="reference external" href="https://github.com/sphinx-gallery/sphinx-gallery">Github repository</a>. You need
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> installed in your system to install Sphinx-Gallery.</p>
<p>You will also need to install the dependencies listed above and <cite>pytest</cite></p>
<p>To install everything do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/sphinx-gallery/sphinx-gallery
$ <span class="nb">cd</span> sphinx-gallery
$ pip install -r requirements.txt
$ python setup.py develop
</pre></div>
</div>
<p>In addition, you will need the following dependencies to build the
documentation:</p>
<ul class="simple">
<li><p>Scipy</p></li>
<li><p>Seaborn</p></li>
</ul>
</div>
</div>
<div class="section" id="set-up-your-project">
<span id="id1"></span><h2>Set up your project<a class="headerlink" href="#set-up-your-project" title="Permalink to this headline">¶</a></h2>
<p>Let’s say your Python project looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── doc
│   ├── conf.py
│   ├── index.rst
│   └── Makefile
├── py_module
│   ├── __init__.py
│   └── mod.py
└── examples
    ├── plot_example.py
    ├── example.py
    └── README.txt
</pre></div>
</div>
<p>Your Python module is on <code class="docutils literal notranslate"><span class="pre">py_module</span></code>, examples on how to use it are
in <code class="docutils literal notranslate"><span class="pre">examples</span></code> and the <code class="docutils literal notranslate"><span class="pre">doc</span></code> folder hold the base documentation
structure you get from executing <code class="docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code>.</p>
<p>To get Sphinx-Gallery into your project we have to extend the Sphinx
<code class="docutils literal notranslate"><span class="pre">doc/conf.py</span></code> file with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">&#39;sphinx_gallery.gen_gallery&#39;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>This is to load Sphinx-Gallery as one of your extensions, the ellipsis
<code class="docutils literal notranslate"><span class="pre">...</span></code> is to represent your other loaded extensions.</p>
<p>Now to declare your project structure, we add a configuration
dictionary for Sphinx-Gallery. The examples directory <code class="docutils literal notranslate"><span class="pre">../examples</span></code>
is declared with a relative path from the <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sphinx_gallery_conf</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># path to your examples scripts</span>
    <span class="s1">&#39;examples_dirs&#39;</span> <span class="p">:</span> <span class="s1">&#39;../examples&#39;</span><span class="p">,</span>
    <span class="c1"># path where to save gallery generated examples</span>
    <span class="s1">&#39;gallery_dirs&#39;</span>  <span class="p">:</span> <span class="s1">&#39;auto_examples&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">gallery_dirs</span></code> is the folder where Sphinx-Gallery will store the
converted Python scripts into rst files that Sphinx will process into
HTML.</p>
<div class="section" id="the-structure-of-the-examples-folder">
<h3>The structure of the examples folder<a class="headerlink" href="#the-structure-of-the-examples-folder" title="Permalink to this headline">¶</a></h3>
<p>There are some extra instructions on how to present your examples to Sphinx-Gallery.</p>
<ul class="simple">
<li><p>A mandatory <code class="docutils literal notranslate"><span class="pre">README.txt</span></code> file with rst syntax to introduce your gallery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_examples.py</span></code> files: Python scripts that have to be executed
and output a plot that will be presented in your gallery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples.py</span></code> files: Python scripts that will not be executed but will
be presented in the gallery</p></li>
</ul>
<p>All the Python scripts in the examples folder need to have a docstring. Written
in rst syntax as it is used in the generated file for the example gallery.</p>
<p>You can have sub-folders in your <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory, those will be
processed by the gallery extension and presented in the gallery, as long as
they also have a <code class="docutils literal notranslate"><span class="pre">README.txt</span></code> file. Sub-folders have to respect the same
structure examples folder.</p>
<p>If these instructions are not clear enough, this package uses itself, to generated
its own example gallery. So check the directory structure and the contents of the
files.</p>
</div>
<div class="section" id="building-the-documentation-locally">
<h3>Building the documentation locally<a class="headerlink" href="#building-the-documentation-locally" title="Permalink to this headline">¶</a></h3>
<p>In your sphinx documentation directory, <code class="docutils literal notranslate"><span class="pre">doc</span></code> execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make html
</pre></div>
</div>
<p>This will start the build of your complete documentation including the examples
gallery. Once documentation is build, our extension will have generated an <code class="docutils literal notranslate"><span class="pre">auto_examples</span></code>
directory and populated it with rst files containing the gallery and each example.
Sphinx gives this files its regular processing and you can enjoy your
generated gallery under the same path. That means you will find the gallery in the path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>_build/html/auto_examples/index.html
</pre></div>
</div>
<p>that you can open under your favorite browser.</p>
<p>Once a build is completed all your examples outputs are in cache. Thus
future rebuilds of your project will not trigger the full execution of
all your examples saving your a large amount of time on each
iteration. Only examples which have changed (comparison evaluated by
md5sum) are built again.</p>
</div>
<div class="section" id="extending-your-makefile">
<h3>Extending your Makefile<a class="headerlink" href="#extending-your-makefile" title="Permalink to this headline">¶</a></h3>
<p>Once your gallery is working you might need remove completely all generated files by
sphinx-gallery to have a clean build, or you might want to build the gallery without
running the examples files. For this you need to extend your <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>clean:
        rm -rf <span class="k">$(</span>BUILDDIR<span class="k">)</span>/*
        rm -rf auto_examples/

html-noplot:
        <span class="k">$(</span>SPHINXBUILD<span class="k">)</span> -D <span class="nv">plot_gallery</span><span class="o">=</span><span class="m">0</span> -b html <span class="k">$(</span>ALLSPHINXOPTS<span class="k">)</span> <span class="k">$(</span>BUILDDIR<span class="k">)</span>/html
        @echo
        @echo <span class="s2">&quot;Build finished. The HTML pages are in </span><span class="k">$(</span>BUILDDIR<span class="k">)</span><span class="s2">/html.&quot;</span>
</pre></div>
</div>
<p>Remember that for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> white space is significant and the indentation are tabs
and not spaces</p>
</div>
</div>
<div class="section" id="know-your-gallery-files">
<h2>Know your Gallery files<a class="headerlink" href="#know-your-gallery-files" title="Permalink to this headline">¶</a></h2>
<p>The Gallery has been built, now you and all of your project’s users
can already start enjoying it. All the temporary files needed to
generate the gallery(rst files, images, chache objects, etc) are
stored where you configured in <code class="docutils literal notranslate"><span class="pre">gallery_dirs</span></code>. The final files that go
into the HTML version of your documentation have a particular
namespace, to avoid colisions with your own files and images.</p>
<p>Our namespace convention is to prefix everything with <code class="docutils literal notranslate"><span class="pre">sphx_glr</span></code> and
change path separators with underscores. This is valid for
cross-references labels, and images.</p>
<p>So for example if we want to reference the example
<a class="reference internal" href="../../../auto_examples/plot_gallery_version.html#sphx-glr-auto-examples-plot-gallery-version-py"><span class="std std-ref">Sphinx-Gallery introduction</span></a>, we just call
its reference
<code class="docutils literal notranslate"><span class="pre">:ref:`sphx_glr_auto_examples_plot_gallery_version.py`</span></code>. The image
it generated has the name <code class="docutils literal notranslate"><span class="pre">sphx_glr_plot_gallery_version_thumb.png</span></code>
and its thumbnail is <code class="docutils literal notranslate"><span class="pre">sphx_glr_plot_gallery_version_thumb.png</span></code></p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2023, lipai@mail.ustc.edu.cn.
      <span class="lastupdated">
        Last updated on Mar 05, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>